아무거나 일단 생각나는 대로 메모, 계획 세운 내용들<br/>

MSA 는 서비스 하나를 구분지어서 그것을 전담해서 개발하는 구조라면 DDD 는 바운디드 컨텍스트를 가진 서브도메인을 규정해서 소규모의 통신을 하는 것을 의미함.<br/>

DDD 의 서브도메인은 바운디드 컨텍스트를 갖는데 그것이 MSA 에서의 서비스를 구분짓는 단위가 아닌 기술적인 역할 등 물리적인 작업 중 구분해야 하는 세부적인 개념이다. 도메인이라는 말에서 꽤 고상한 냄새를 풍기기에 초반에 착각을 자주하게된다. MSA가 조금 더 큰 범위의 개념이고 MSA 내에서 필요한 부분들을 모아서 도메인의 범위를 규정해서 도메인 드리븐으로 개발하게 된다.<br/>



**내 생각**<br/>

내 생각에는 결국 MSA 를 전부 갈아엎고 DDD로 전환하는 것은 불가능하며 극히 일부기능을 DDD로 전환하게 되는 듯.<br/>

오케스트레이션을 하고 있는 MSA가 성능이 높아져야 하거나 분산트랜잭션이 필요할 경우 EDA로 전환.<br/>

꼭 필요한 비즈니스 요건이 아니라면 분산트랜잭션 도입은 안하는게 낫다. 이런 경우 앞단의 Gateway 등으로 유량을 제어하거나, Gateway가 구축되지 않은 레거시 시스템의 프론트서버 환경이라면... Request 의 최대치 등을 통해 요청 자체를 실패하도록 제어하는 것도 방법.<br/>

비즈니스 요건 상 고가용성 + 고빈도 트래픽을 모두 받아야만 하는 상황이라면 분산트랜잭션을 도입.<br/>

하지만, 대부분의 경우 트랜잭션의 ACID를 만족하면서 고 성능까지는 필요가 없는 경우가 대다수. 이런 경우 굳이 분산트랜잭션을 도입하기 보다는 요청의 유량이 일정치 범주 안에서는 Request 제어레벨에서 애초에 트랜잭션 진입을 차단 후, 요청자체를 다시하게끔 유도하는게 합리적인 선택<br/>

<br/>



**DDD 설계시 분해의 기본 원칙**

- 유비쿼터스
- 도메인 언어
- 경계 컨텍스트
- 서브도메인

<br/>



**MSA 설계시 주요 과정**

**MSA 식별 및 선별 절차**

- 기능요건 정의
- 도메인 모델 도출
- 시스템 작업 구별,식별작업
- 고수준 시나리오, `케이스` 정의



**카프카 주요 개념 중 짚고 가야 하는 것 (필수적으로 정리해둬야 하는 것들)**

- Partition Replication Factor (구글드라이브에 정리해둔 사진 첨부 꼭!!)
- ISR
- Partition

<br/>



**IPC**
Sync 통신과 Async 통신
Sync : http, grpc
Async : Kafka, RabbitMQ
각각의 장단점, GRPC의 단점 (.proto 깨지면 모두 깨진다는 점 등등)
주의 ) Async 는 Non Blocking 이 아니라 응답결과를 돌려받지 않고 자기 작업을 끝내는 것을 의미. 인터넷이나 블로그에서 Async 를 논블로킹한 통신인 것처럼 혼용되는 경우가 너무 많기에 주의점으로 정리

<br/>



**SAGA 와 Transaction**
2PC, 보상트랜잭션

분산 트랜잭션과 트랜잭션 조율
- 코레오그레피, 오케스트레이션
난 이거 다 쓰기 싫다구!!!

<br/>



**이벤트 소싱과 EDA**
트랜잭션의 어려움을 이벤트 기반으로.


머니 충전, 송금 기능에 대해 분산 트랜잭션 도입이 필요한지
- 머니충전 : 필요하다. 펌뱅킹 출금과 머니충전이 하나의 트랜잭션 단위로 원자성 기반으로 동작해야 한다. 안그럴경우 소송이 발생
- 송금: 불필요하다. 머니를 충전했더라도 송금이 실패하는 것은 금전의 손해가 발생하지 않는다. 오히려 페이시스템 법인에도 이득이 될 수 있다.